- rewrite sharedstream to only write data to mmf after flush, implemented by a streamchunk buffer
- add ability to send headers in function call